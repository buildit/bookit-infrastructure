---

Description: Application Build Foundation
AWSTemplateFormatVersion: 2010-09-09

Parameters:
  AppStackName:
    Type: String

  GitHubRepo:
    Type: String

Resources:
  Repository:
    Type: AWS::ECR::Repository
    Properties:
      RepositoryName: !Join [ '-', [ !Ref AppStackName, !Ref GitHubRepo, 'ecr', 'repo' ] ]

Outputs:
  RepositoryURI:
    Description: ECR Repository URI
    Export:
      Name: !Sub "${AppStackName}-${GitHubRepo}--RepositoryURI"
    Value: !Sub "${AWS::AccountId}.dkr.ecr.${AWS::Region}.amazonaws.com/${Repository}"
  RepositoryARN:
    Description: ECR Repository ARN
    Export:
      Name: !Sub "${AppStackName}-${GitHubRepo}--RepositoryARN"
    Value: !Sub "arn:aws:ecr:${AWS::Region}:${AWS::AccountId}:repository/${Repository}"
